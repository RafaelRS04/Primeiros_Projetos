<meta charset="UTF-8">
<title>Cálculo Média das Idades</title>

<script>
    function pulaLinha() {

        document.write("<br><br>");
    }

    function escreva(texto) {

        document.write(texto);
        pulaLinha();
    }

    function quantidadePessoas() {

        var quantidadePessoas = parseInt(prompt("Informe a quantidade de pessoas"));

        while (isNaN(quantidadePessoas) || quantidadePessoas <= 1) {
            alert("Digite apenas números válidos e maiores que um!");
            quantidadePessoas = parseInt(prompt("Informe a quantidade de pessoas"));
        }

        return quantidadePessoas
    }

    function verificaIdade(idade, contadorPessoa) {

        while (isNaN(idade) || idade < 0) {
            alert("Número inválido. Por favor, redigite a idade da " + contadorPessoa + "° pessoa!");
            idade = parseInt(prompt("Informe novamente a idade da " + contadorPessoa + "° pessoa"));
        }
        
        return idade;
    }

    function calculaMediaIdades(quantidadePessoas) {

        var contador = 0;
        var contadorPessoa = 1;
        var totalIdades = 0;

        while (contador < quantidadePessoas) {
            var idade = parseInt(prompt("Informe a idade da " + contadorPessoa + "° pessoa"));
            idade = verificaIdade(idade, contadorPessoa); 
            totalIdades += idade;
            contadorPessoa++;
            contador++;
        }

        var resultado = totalIdades / quantidadePessoas;
        
        switch (totalIdades % quantidadePessoas != 0) {
            case true:
                return resultado.toFixed(1);
            default:
                return resultado;
        }
    }

    alert("Aviso: a quantidade de pessoas informada deve se maior que um, e as idades "
     + "maior ou igual a zero para o funcionamento correto do programa. Caso contrário, "
      + "erros serão exibidos na tela!");

    var quantidadePessoas = quantidadePessoas();
    var mediaIdades = calculaMediaIdades(quantidadePessoas);

    escreva("A média das idades das " + quantidadePessoas + " pessoas é " + mediaIdades + " anos.");
</script>
