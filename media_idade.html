<html>
    <head>
        <meta charset="UTF-8">
        <title>Calculadora de Média de Idades</title>
    </head>
    <body style="text-align: center; background-color: whitesmoke;">
        <h1>Calculadora de Média de Idades</h1>
        <label for="inputIdades">Idades:</label><br>
        <input id="inputIdades" name="inputIdades" style="margin-top: 2;margin-bottom: 5" type="number" min="0" step="1"><br>
        <output name="outputIdades" ></output><br>
        <button id="adicionar" name="adicionar" style="margin-top: 5" onclick="pushIdade()">Adicionar</button>
        <button id="remover" name="remover" style="margin-top: 5" onclick="removerIdade()">Remover</button><br>
        <button id="calcular" name="calcular" style="margin-top: 5; margin-bottom: 5" onclick="calcularMedia()">Calcular</button><br>
        <output name="outputResultado"></output><br>
        <hr size="2" color="powderblue" onclick="limparTudo()"/>
        <script>
            function isNumber(numero) {

                return (typeof numero == "number" && isFinite(numero) ? true : false);
            }

            function pushIdade() {

                var valorIdade = parseInt(inputIdades.value);

                if (isNumber(valorIdade) && valorIdade >= 0) {
                    idades.push(valorIdade);
                    outputIdades.innerHTML = "<strong>Idades = [" + idades + "]</strong>";
                    inputIdades.value = "";
                    inputIdades.focus();
                } else {
                    alert("Digite apenas números iguais ou maiores que zero no campo de idades!");
                    inputIdades.focus();
                }
            }

            function removerIdade() {

                idades.splice(idades.length - 1);
                outputIdades.innerHTML = "<strong>Idades = [" + idades + "]</strong>";
                inputIdades.focus();
            }

            function calcularMedia() {

                if (idades.length >= 1) {
                    var somaIdades = idades.reduce((total, idade) => total + idade);
                    var resultado = somaIdades / idades.length;
                    resultado = (somaIdades % idades.length ? resultado.toFixed(1) : resultado)
                    outputResultado.innerHTML = "A média das idades é " + resultado + (resultado == 1 ? " ano." : " anos.");
                } else {
                    alert("Por favor, digite as idades antes de calcular a média!");
                    inputIdades.focus();
                }
            }

            function limparTudo() {

                idades = [];
                outputResultado.value = "";
                inputIdades.value = "";
                outputIdades.innerHTML = "<strong>Idades = [" + idades + "]</strong>";
                inputIdades.focus();
            }

            var inputIdades = document.querySelector("[name='inputIdades']");
            var outputIdades = document.querySelector("[name='outputIdades']");
            var outputResultado = document.querySelector("[name='outputResultado']");
            var idades = [];

            inputIdades.focus();
            outputIdades.innerHTML = "<strong>Idades = [" + idades + "]</strong>";
        </script>
    </body>
</html>
